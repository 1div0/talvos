MODULE jacobi.spvasm
ENTRY jacobi

ALLOCATE norder BUFFER 4 DATA INT32 2

ALLOCATE x0 BUFFER 8 DATA FLOAT
1 1

ALLOCATE x1 BUFFER 8 DATA FLOAT
0 0

ALLOCATE A BUFFER 16 DATA FLOAT
2 1
5 7

ALLOCATE b BUFFER 8 DATA FLOAT
11 13

DESCRIPTOR_SET 0 0 norder
DESCRIPTOR_SET 0 3 A
DESCRIPTOR_SET 0 4 b

LOOP 15
  DESCRIPTOR_SET 0 1 x0
  DESCRIPTOR_SET 0 2 x1
  DISPATCH 2 1 1

  DESCRIPTOR_SET 0 1 x1
  DESCRIPTOR_SET 0 2 x0
  DISPATCH 2 1 1
ENDLOOP

DUMP FLOAT x0

# CHECK Buffer 'x0' (8 bytes):
# CHECK   x0[0] = 7.11111
# CHECK   x0[1] = -3.22222
